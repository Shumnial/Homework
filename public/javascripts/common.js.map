{"version":3,"sources":["common.js"],"names":["$","makeMask","formTel","mask","onDeleteButtonClick","contact","this","closest","id","attr","element","userStore","findIndex","el","splice","saveToLocal","addClass","setTimeout","remove","makeList","newId","node","contactsList","nodes","map","lastname","name","address","tel","html","getInitial","data","localStorage","getItem","JSON","parse","setItem","stringify","sortContacts","sort","a","b","handleSubmit","evt","preventDefault","formValue","val","match","find","removeClass","result","serializeArray","obj","forEach","value","Date","now","window","getCoords","push","contactsForm","on","document"],"mappings":"AAAA,YAAAA,GAAE,WAOF,QAASC,KACRC,EAAQC,KAAK,oBAOd,QAASC,KACP,GAAMC,GAAUL,EAAEM,MAAMC,QAAQ,cAC1BC,GAAMR,EAAEK,GAASI,KAAK,WACtBC,EAAUC,EAAUC,UAAU,SAACC,GACpC,MAAOA,GAAGL,KAAOA,GAGlBG,GAAUG,OAAOJ,EAAS,GAC1BK,IACAV,EAAQW,SAAS,0BACjBC,WAAW,WACVZ,EAAQa,UACN,KAcL,QAASC,GAAUC,GAClB,GAAMC,GAAOC,EACTC,EAAQZ,EAAUa,IAAI,SAACX,GAC1B,GAAIG,GAAWI,IAAUP,EAAGL,GAAK,2BAA6B,EAC9D,OAAA,wBAA+BQ,EAA/B,cAAqDH,EAAGL,GAAxD,+CAAyGK,EAAGY,SAA5G,iDACoCZ,EAAGa,KADvC,uDAE0Cb,EAAGc,QAF7C,gDAGmCd,EAAGe,IAHtC,0EAMDP,GAAKQ,KAAKN,GAIX,QAASO,KACR,GAAMC,GAAOC,aAAaC,QAAQ,QAC9BF,KACJpB,EAAYuB,KAAKC,MAAMJ,IAGxB,QAAShB,KACRiB,aAAaI,QAAQ,QAASF,KAAKG,UAAU1B,IAG9C,QAAS2B,KACP3B,EAAU4B,KAAK,SAAUC,EAAGC,GAC1B,MAAID,GAAEf,SAAWgB,EAAEhB,YAGfe,EAAEf,SAAWgB,EAAEhB,SACV,EAEF,IAIX,QAASiB,GAAaC,GACrBA,EAAIC,gBACJ,IAAIC,GAAY7C,EAAE,yBAAyB8C,MACvCC,EAAQpC,EAAUqC,KAAK,SAAAnC,GAAA,MAAKA,GAAGe,MAAQiB,GAE3C,IAAGE,EAEF,WADA7C,GAAQc,SAAS,gCAGjBd,GAAQ+C,YAAY,gCAErB,IAAMC,GAASlD,EAAEM,MAAM6C,iBACjBC,IACNF,GAAOG,QAAQ,SAACxC,GACfuC,EAAIvC,EAAGa,MAAQb,EAAGyC,QAEnBF,EAAI5C,GAAK+C,KAAKC,MACdC,OAAOjC,IAAIkC,UAAUN,EAAIzB,SACzBhB,EAAUgD,KAAKP,GACfd,IACAvB,IACAI,EAASiC,EAAI5C,IAjGd,GAAIoD,GAAe5D,EAAE,oBACjBsB,EAAetB,EAAE,oBAIjBE,GAFWF,EAAE,0BACEA,EAAE,8BACPA,EAAE,yBAIhBC,IAEA,IAAIU,KACJmB,KAwFAX,IAEAyC,EAAaC,GAAG,SAAUnB,GAC1B1C,EAAE8D,UAAUD,GAAG,QAAS,yBAA0BzD","file":"../sources/common.js","sourcesContent":["$(function() {\r\nlet contactsForm = $('.c-contacts-form');\r\nlet contactsList = $('.c-contacts-list');\r\nlet persons = [{'name': 'Андрей', 'lastname': 'Андреевич'}, {'name': 'Борис', 'lastname': 'Борисович'}, {'name': 'Виктор', 'lastname': 'Викторович'}];\r\nlet formName = $('.c-contacts-form__name');\r\nlet formLastname = $('.c-contacts-form__lastname');\r\nlet formTel = $('.c-contacts-form__tel');\r\nfunction makeMask () {\r\n\tformTel.mask('+7(999) 999-9999');\r\n}\r\nmakeMask();\r\n\r\nlet userStore = [];\r\ngetInitial();\r\n\r\nfunction onDeleteButtonClick () {\r\n\t\tconst contact = $(this).closest('.c-contact');\r\n\t\tconst id = +$(contact).attr('data-id');\r\n\t\tconst element = userStore.findIndex((el)=> {\r\n\t\t\treturn el.id === id;\r\n\t\t});\r\n\r\n\t\tuserStore.splice(element, 1);\r\n\t\tsaveToLocal();\r\n\t\tcontact.addClass('c-contact--slide-right');\r\n\t\tsetTimeout(function () {\r\n\t\t\tcontact.remove();\r\n\t\t}, 500)\r\n};\r\n\r\nfunction User (data) {\r\n\tconst self = this;\r\n\tthis.name = data.name;\r\n\tthis.lastname = data.lastname;\r\n\r\n\tthis.getFullName = function() {\r\n\t\tconsole.log(self.name + ' ' + self.lastname)\r\n\t\treturn self.name + self.lastname;\r\n\t}\r\n};\r\n\r\nfunction makeList (newId) {\r\n\tconst node = contactsList;\r\n\tlet nodes = userStore.map((el) => {\r\n\t\tlet addClass = newId === el.id ? 'c-contact--slide-default' : '';\r\n\t\treturn `<li class=\"c-contact ${addClass}\" data-id=\"${el.id}\"><div class=\"c-contact__lastname\">Фамилия: ${el.lastname}</div>\r\n\t\t<div class=\"c-contact__name\">Имя: ${el.name}</div>\r\n\t\t<div class=\"c-contacts__address\">Улица: ${el.address}</div>\r\n\t\t<div class=\"c-contact__tel\">Тел: ${el.tel}</div>\r\n\t\t<button class=\"c-contact__delete-btn\">DELETE</button></li>`\r\n\t});\r\n\tnode.html(nodes);\r\n};\r\n\r\n// Проверяет localStorage на наличие списка контактов\r\nfunction getInitial () {\r\n\tconst data = localStorage.getItem('users');\r\n\tif(!data) return;\r\n\tuserStore = JSON.parse(data);\r\n};\r\n// Сохраняет объект контактов в localStorage\r\nfunction saveToLocal () {\r\n\tlocalStorage.setItem('users', JSON.stringify(userStore));\r\n} ;\r\n// Сортирует контакты по фамилии\r\nfunction sortContacts () {\r\n  userStore.sort(function (a, b) {\r\n    if (a.lastname < b.lastname) {\r\n      return -1;\r\n    }\r\n    if (a.lastname > b.lastname) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n};\r\n\r\nfunction handleSubmit(evt) {\r\n\tevt.preventDefault();\r\n\tlet formValue = $('.c-contacts-form__tel').val();\r\n\tlet match = userStore.find(el=> el.tel === formValue);\r\n\r\n\tif(match) {\r\n\t\tformTel.addClass('c-contacts-form__tel--invalid');\r\n\t\treturn;\r\n\t} else {\r\n\t\tformTel.removeClass('c-contacts-form__tel--invalid');\r\n\t};\r\n\tconst result = $(this).serializeArray();\r\n\tconst obj = {};\r\n\tresult.forEach((el) => {\r\n\t\tobj[el.name] = el.value;\r\n\t});\r\n\tobj.id = Date.now();\r\n\twindow.map.getCoords(obj.address);\r\n\tuserStore.push(obj);\r\n\tsortContacts();\r\n\tsaveToLocal();\r\n\tmakeList(obj.id);\r\n};\r\n\r\nmakeList();\r\n\r\ncontactsForm.on('submit', handleSubmit);\r\n$(document).on('click', '.c-contact__delete-btn', onDeleteButtonClick);\r\n});"]}