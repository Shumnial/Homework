{"version":3,"sources":["common.js"],"names":["$","onDeleteButtonClick","console","log","this","contact","closest","id","attr","element","userStore","findIndex","el","idx","splice","saveToLocal","remove","makeList","node","contactsList","nodes","map","lastname","name","tel","html","getInitial","data","localStorage","getItem","JSON","parse","setItem","stringify","handleSubmit","evt","preventDefault","result","serializeArray","obj","forEach","value","Date","now","push","contactsForm","on","length","document"],"mappings":"AAAA,YAAAA,GAAE,WAQF,QAASC,KACPC,QAAQC,IAAIC,KACZ,IAAMC,GAAUL,EAAEI,MAAME,QAAQ,cAC1BC,GAAMP,EAAEK,GAASG,KAAK,WACtBC,EAAUC,EAAUC,UAAU,SAACC,EAAIC,GACxC,MAAOD,GAAGL,KAAOA,GAGlBG,GAAUI,OAAOL,EAAS,GAC1BM,IACAV,EAAQW,SAeV,QAASC,KACR,GAAMC,GAAOC,EAETC,EAAQV,EAAUW,IAAI,SAACT,GAC1B,MAAA,kCAAyCA,EAAGL,GAA5C,+CAA6FK,EAAGU,SAAhG,iDACoCV,EAAGW,KADvC,iDAEoCX,EAAGY,IAFvC,0EAMDN,GAAKO,KAAKL,GAGX,QAASM,KACR,GAAMC,GAAOC,aAAaC,QAAQ,QAC9BF,KACJjB,EAAYoB,KAAKC,MAAMJ,IAGxB,QAASZ,KACRa,aAAaI,QAAQ,QAASF,KAAKG,UAAUvB,IAG9C,QAASwB,GAAaC,GACrBA,EAAIC,gBACJ,IAAMC,GAASrC,EAAEI,MAAMkC,iBACjBC,IAENF,GAAOG,QAAQ,SAAC5B,GACf2B,EAAI3B,EAAGW,MAAQX,EAAG6B,QAEnBF,EAAIhC,GAAKmC,KAAKC,MACdjC,EAAUkC,KAAKL,GACfxB,IACAE,IAlED,GAAI4B,GAAe7C,EAAE,oBACjBmB,EAAenB,EAAE,oBAGjBU,IACJgB,KAgEAmB,EAAaC,GAAG,SAAUZ,GAC1BhC,QAAQC,IAAIO,GAETA,EAAUqC,QACZ9B,IAEDjB,EAAEgD,UAAUF,GAAG,QAAS,yBAA0B7C","file":"../sources/common.js","sourcesContent":["$(function() {\r\nlet contactsForm = $('.c-contacts-form');\r\nlet contactsList = $('.c-contacts-list');\r\nlet persons = [{'name': 'Андрей', 'lastname': 'Андреевич'}, {'name': 'Борис', 'lastname': 'Борисович'}, {'name': 'Виктор', 'lastname': 'Викторович'}];\r\n\r\nlet userStore = [];\r\ngetInitial();\r\n\r\nfunction onDeleteButtonClick () {\r\n\t\tconsole.log(this);\r\n\t\tconst contact = $(this).closest('.c-contact');\r\n\t\tconst id = +$(contact).attr('data-id');\r\n\t\tconst element = userStore.findIndex((el, idx)=> {\r\n\t\t\treturn el.id === id;\r\n\t\t});\r\n\r\n\t\tuserStore.splice(element, 1);\r\n\t\tsaveToLocal();\r\n\t\tcontact.remove();\r\n};\r\n\r\n\r\nfunction User (data) {\r\n\tconst self = this;\r\n\tthis.name = data.name;\r\n\tthis.lastname = data.lastname;\r\n\r\n\tthis.getFullName = function() {\r\n\t\tconsole.log(self.name + ' ' + self.lastname)\r\n\t\treturn self.name + self.lastname;\r\n\t}\r\n};\r\n\t\r\nfunction makeList () {\r\n\tconst node = contactsList;\r\n\r\n\tlet nodes = userStore.map((el) => {\r\n\t\treturn `<li class=\"c-contact\" data-id=\"${el.id}\"><div class=\"c-contact__lastname\">Фамилия: ${el.lastname}</div>\r\n\t\t<div class=\"c-contact__name\">Имя: ${el.name}</div>\r\n\t\t<div class=\"c-contact__name\">Тел. ${el.tel}</div>\r\n\t\t<button class=\"c-contact__delete-btn\">Delete</button></li>`\r\n\t});\r\n\r\n\tnode.html(nodes);\r\n};\r\n\r\nfunction getInitial () {\r\n\tconst data = localStorage.getItem('users');\r\n\tif(!data) return;\r\n\tuserStore = JSON.parse(data);\r\n};\r\n\t\r\nfunction saveToLocal () {\r\n\tlocalStorage.setItem('users', JSON.stringify(userStore));\r\n} \r\n\r\nfunction handleSubmit(evt) {\r\n\tevt.preventDefault();\r\n\tconst result = $(this).serializeArray();\r\n\tconst obj = {};\r\n\r\n\tresult.forEach((el) => {\r\n\t\tobj[el.name] = el.value;\r\n\t});\r\n\tobj.id = Date.now();\r\n\tuserStore.push(obj);\r\n\tsaveToLocal()\r\n\tmakeList()\r\n};\r\n\r\ncontactsForm.on('submit', handleSubmit)\r\nconsole.log(userStore);\r\n\r\nif(userStore.length) {\r\n\tmakeList();\r\n}\r\n$(document).on('click', '.c-contact__delete-btn', onDeleteButtonClick);\r\n});"]}