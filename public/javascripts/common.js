"use strict";$(function(){function t(){var t=$(this).closest(".c-contact"),n=+$(t).attr("data-id"),a=u.findIndex(function(t){return t.id===n});u.splice(a,1),c(),t.addClass("c-contact--slide-right"),setTimeout(function(){t.remove()},250)}function n(t){function n(){var n=void 0,a=l,c=u.map(function(a){var c=t===a.id?"c-contact--slide-default":"";return a.coords&&(m.setCenter(a.coords,18),n=new ymaps.Placemark(a.coords,{hintContent:a.name+" "+a.lastname,balloonContent:"<p>"+a.name+" "+a.lastname+'</p><button class="remove-placemark">DELETE</button>'}),m.geoObjects.add(n)),'<li class="c-contact '+c+'" data-id="'+a.id+'"><div class="c-contact__lastname">Фамилия: '+a.lastname+'</div>\n\t\t\t<div class="c-contact__name">Имя: '+a.name+'</div>\n\t\t\t<div class="c-contacts__address">'+a.address+'</div>\n\t\t\t<div class="c-contact__tel">Тел: '+a.tel+'</div>\n\t\t\t<button class="c-contact__delete-btn">DELETE</button></li>'});a.html(c)}ymaps.ready(n)}function a(){var t=localStorage.getItem("users");t&&(u=JSON.parse(t))}function c(){localStorage.setItem("users",JSON.stringify(u))}function e(){u.sort(function(t,n){return t.lastname<n.lastname?-1:t.lastname>n.lastname?1:0})}function o(){m=new ymaps.Map("map",{center:[56.84,60.6],zoom:11})}function s(t){var n=ymaps.geocode(t);return n.then(function(t){var n=t.geoObjects.get(0),a=n?n.geometry.getCoordinates():null;return a})["catch"](function(t){return console.log("err: ",t)})}function r(t){t.preventDefault();var a=$(".c-contacts-form__tel").val(),o=u.find(function(t){return t.tel===a});if(o)return void d.addClass("c-contacts-form__tel--invalid");d.removeClass("c-contacts-form__tel--invalid");var r=$(this).serializeArray(),i={};r.forEach(function(t){i[t.name]=t.value}),i.id=Date.now(),s(i.address).then(function(t){return t?(i.coords=t,u.push(i),e(),c(),void n(i.id)):void alert("Неверный адрес")})}var i=$(".c-contacts-form"),l=$(".c-contacts-list"),d=($(".c-contacts-form__name"),$(".c-contacts-form__lastname"),$(".c-contacts-form__tel")),u=[];a(),ymaps.ready(o);var m;n(),i.on("submit",r),$(document).on("click",".c-contact__delete-btn",t)});
//# sourceMappingURL=../javascripts/common.js.map
